{% extends "base.html" %}
{% block content %}
<div class="text-center mb-4">
    <h1 class="fw-bold text-primary"><i class="bi bi-check2-square"></i> Tasks</h1>
    <p class="text-muted">Manage and track your tasks</p>
</div>
<div class="card p-4 mb-4">
    <h5><i class="bi bi-plus-circle"></i> Add New Task</h5>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="row">
            <div class="col-md-6 mb-3">{{ form.title.label(class="form-label") }} {{ form.title(class="form-control") }}</div>
            <div class="col-md-6 mb-3">{{ form.description.label(class="form-label") }} {{ form.description(class="form-control") }}</div>
        </div>
        <div class="row">
            <div class="col-md-4 mb-3">{{ form.status.label(class="form-label") }} {{ form.status(class="form-control") }}</div>
            <div class="col-md-4 mb-3">{{ form.deadline.label(class="form-label") }} {{ form.deadline(class="form-control", type="datetime-local") }}</div>
            <div class="col-md-4 mb-3">
                <label class="form-label">Project</label>
                <select name="project_id" class="form-control">
                    {% for project in projects %}<option value="{{ project.id }}">{{ project.name }}</option>{% endfor %}
                </select>
            </div>
        </div>
        <div class="mb-3">
            <label class="form-label">Assign To</label>
            <select name="assigned_to" class="form-control">
                {% for user in users %}<option value="{{ user.id }}">{{ user.username }}</option>{% endfor %}
            </select>
        </div>
        {{ form.submit(class="btn btn-success") }}
    </form>
</div>
<div class="row">
    {% for task in tasks %}
        <div class="col-md-4 mb-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">{{ task.title }}</h5>
                    <p class="card-text">{{ task.description }}</p>
                    <span class="badge bg-{{ 'success' if task.status == 'Done' else 'warning' if task.status == 'In Progress' else 'secondary' }}">{{ task.status }}</span>
                    {% if task.deadline %}
                        <p class="text-muted mt-2"><i class="bi bi-calendar"></i> Deadline: {{ task.deadline.strftime('%Y-%m-%d') }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}